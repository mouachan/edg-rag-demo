apiVersion: serving.kserve.io/v1beta1
kind: InferenceService
metadata:
  name: embeddinggemma-300m
  namespace: edg-demo
  annotations:
    opendatahub.io/genai-use-case: embedding
    opendatahub.io/hardware-profile-name: nvidia-gpu-l40
    opendatahub.io/hardware-profile-namespace: redhat-ods-applications
    opendatahub.io/model-type: embedding
    openshift.io/description: ""
    openshift.io/display-name: embeddinggemma-300m
    security.opendatahub.io/enable-auth: "false"
    serving.kserve.io/deploymentMode: RawDeployment
    serving.kserve.io/stop: "false"
  labels:
    networking.kserve.io/visibility: exposed
    opendatahub.io/dashboard: "true"
    opendatahub.io/genai-asset: "true"
spec:
  predictor:
    automountServiceAccountToken: false
    maxReplicas: 1
    minReplicas: 1
    model:
      modelFormat:
        name: tei
      name: ""
      resources:
        limits:
          cpu: "4"
          memory: 16Gi
          nvidia.com/gpu: "1"
        requests:
          cpu: "4"
          memory: 16Gi
          nvidia.com/gpu: "1"
      runtime: tei-embeddinggemma
      storageUri: pvc://gemma-embedding-storage
    nodeSelector:
      topology.kubernetes.io/zone: eu-central-1a
    tolerations:
    - effect: NoSchedule
      key: nvidia.com/gpu
      operator: Equal
      value: NVIDIA-L40-PRIVATE
